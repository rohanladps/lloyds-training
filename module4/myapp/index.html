<!DOCTYPE html>
<html lang="en">

<body>
    <div class="container">
        <p id="nameread">Name:</p>
        <p id="countryread">Country:</p>
        <p id="carread">Car:</p>
        <button id="read-button" onclick="buttonClick()">Read Data from JSON file</button>
        <p id="msg"></p>
    </div>
    <hr>
    <div class="container">
        <form action="/submit" method="post" target="dummyframe">
            <label for="name">Name:</label>
            <input type="text" id="name" name="name"><br><br>
            <label for="country">Country:</label>
            <input type="text" id="country" name="country"><br><br>
            <label for="car">Car:</label>
            <input type="text" id="car" name="car"><br><br>
            <input id="write-submit" type="submit" value="Submit">
        </form>
    </div>
    <iframe name="dummyframe" id="dummyframe" style="display: none;"></iframe>
</body>

<script>
    function buttonClick() {
        fetch('/read', { method: 'GET' })
            .then(function (response) {
                return response.text()
            }).then(function (data) {
                if (data === 'nonexistent') {
                    document.getElementById('msg').innerHTML = 'The file does not currently exist!'
                }
                else {
                    parsedData = JSON.parse(data);
                    document.getElementById('nameread').innerHTML = 'Name: ' + parsedData.name
                    document.getElementById('countryread').innerHTML = 'Country: ' + parsedData.country
                    document.getElementById('carread').innerHTML = 'Car: ' + parsedData.car
                }
            })

    }
</script>

</html>